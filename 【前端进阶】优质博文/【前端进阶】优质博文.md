

## ã€Step-By-Stepã€‘ä¸€å‘¨é¢è¯•é¢˜æ·±å…¥è§£æ / å‘¨åˆŠ 01 

> å¾…æ›´æ–°çŠ¶æ€
>
> ä»Šå¤© 2019/9/27  ğŸ˜œ (à¸‡ â€¢_â€¢)à¸‡

### 1.å¦‚ä½•æ­£ç¡®åˆ¤æ–­thisçš„æŒ‡å‘ï¼Ÿ(2019-09-19)

å¦‚æœç”¨ä¸€å¥è¯è¯´æ˜ this çš„æŒ‡å‘ï¼Œé‚£ä¹ˆå³æ˜¯: è°è°ƒç”¨å®ƒï¼Œthis å°±æŒ‡å‘è°ã€‚

ä½†æ˜¯ä»…é€šè¿‡è¿™å¥è¯ï¼Œæˆ‘ä»¬å¾ˆå¤šæ—¶å€™å¹¶ä¸èƒ½å‡†ç¡®åˆ¤æ–­ this çš„æŒ‡å‘ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€äº›è§„åˆ™å»å¸®åŠ©è‡ªå·±ï¼š

this çš„æŒ‡å‘å¯ä»¥æŒ‰ç…§ä»¥ä¸‹é¡ºåºåˆ¤æ–­:

**1ã€å…¨å±€ç¯å¢ƒä¸­çš„ this** 

æµè§ˆå™¨ç¯å¢ƒï¼šæ— è®ºæ˜¯å¦åœ¨ [ä¸¥æ ¼æ¨¡å¼](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode) ä¸‹ï¼Œåœ¨å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­ï¼ˆåœ¨ä»»ä½•å‡½æ•°ä½“å¤–éƒ¨ï¼‰this éƒ½æŒ‡å‘å…¨å±€å¯¹è±¡ `window`;

node ç¯å¢ƒï¼šæ— è®ºæ˜¯å¦åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåœ¨å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­ï¼ˆåœ¨ä»»ä½•å‡½æ•°ä½“å¤–éƒ¨ï¼‰ï¼Œthis éƒ½æ˜¯ç©ºå¯¹è±¡ `{}`

**2ã€æ˜¯å¦æ˜¯ `new` ç»‘å®š** 

å¦‚æœæ˜¯ `new` ç»‘å®šï¼Œå¹¶ä¸”æ„é€ å‡½æ•°ä¸­æ²¡æœ‰è¿”å› function æˆ–è€…æ˜¯ objectï¼Œé‚£ä¹ˆ this æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ã€‚å¦‚ä¸‹:

> æ„é€ å‡½æ•°è¿”å›å€¼ä¸æ˜¯ function æˆ– objectã€‚

```js
function Super(age) {
    this.age = age;
}

let instance = new Super('26');
console.log(instance.age); //26
```



> æ„é€ å‡½æ•°è¿”å›å€¼æ˜¯ function æˆ– objectï¼Œè¿™ç§æƒ…å†µä¸‹ this æŒ‡å‘çš„æ˜¯è¿”å›çš„å¯¹è±¡ã€‚

```js
function Super(age) {
    this.age = age;
    let obj = {a: '2'};
    return obj;
}


let instance = new Super('hello');
console.log(instance.age); //undefined
```



ä½ å¯ä»¥æƒ³çŸ¥é“ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ `new` çš„å®ç°åŸç†:

1. åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚
2. è¿™ä¸ªæ–°å¯¹è±¡ä¼šè¢«æ‰§è¡Œ `[[åŸå‹]]` è¿æ¥ã€‚
3. å±æ€§å’Œæ–¹æ³•è¢«åŠ å…¥åˆ° this å¼•ç”¨çš„å¯¹è±¡ä¸­ã€‚å¹¶æ‰§è¡Œäº†æ„é€ å‡½æ•°ä¸­çš„æ–¹æ³•.
4. å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œé‚£ä¹ˆ this æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ï¼Œå¦åˆ™ this æŒ‡å‘æ„é€ å‡½æ•°ä¸­è¿”å›çš„å¯¹è±¡ã€‚

```js
function new(func) {
    let target = {};
    target.__proto__ = func.prototype;
    let res = func.call(target);
    //æ’é™¤ null çš„æƒ…å†µ
    if (res && typeof(res) == "object" || typeof(res) == "function") 		{
    	return res;
    	}
    return target;
}		
```

**3**ã€å‡½æ•°æ˜¯å¦é€šè¿‡ call,apply è°ƒç”¨ï¼Œæˆ–è€…ä½¿ç”¨äº† bind ç»‘å®šï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆthisç»‘å®šçš„å°±æ˜¯æŒ‡å®šçš„å¯¹è±¡ã€å½’ç»“ä¸ºæ˜¾å¼ç»‘å®šã€‘ã€‚ 

```js
function info(){
    console.log(this.age);
}
var person = {
    age: 20,
    info
}
var age = 28;
var info = person.info;
info.call(person);   //20
info.apply(person);  //20
info.bind(person)(); //20
```

è¿™é‡ŒåŒæ ·éœ€è¦æ³¨æ„ä¸€ç§**ç‰¹æ®Š**æƒ…å†µï¼Œå¦‚æœ call,apply æˆ–è€… bind ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°å€¼æ˜¯ `undefined` æˆ–è€… `null`ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ this çš„å€¼ä¸ºä¼ å…¥çš„å€¼ null /undefinedã€‚éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå®é™…åº”ç”¨çš„é»˜è®¤ç»‘å®šè§„åˆ™ï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡(nodeç¯å¢ƒä¸ºglobalï¼Œæµè§ˆå™¨ç¯å¢ƒä¸ºwindow)

```js
function info(){
    //nodeç¯å¢ƒä¸­:éä¸¥æ ¼æ¨¡å¼ globalï¼Œä¸¥æ ¼æ¨¡å¼ä¸ºnull
    //æµè§ˆå™¨ç¯å¢ƒä¸­:éä¸¥æ ¼æ¨¡å¼ windowï¼Œä¸¥æ ¼æ¨¡å¼ä¸ºnull
    console.log(this);
    console.log(this.age);
}
var person = {
    age: 20,
    info
}
var age = 28;
var info = person.info;
//ä¸¥æ ¼æ¨¡å¼æŠ›å‡ºé”™è¯¯ï¼›
//éä¸¥æ ¼æ¨¡å¼ï¼Œnodeä¸‹è¾“å‡ºundefinedï¼ˆå› ä¸ºå…¨å±€çš„ageä¸ä¼šæŒ‚åœ¨ global ä¸Šï¼‰
//éä¸¥æ ¼æ¨¡å¼ã€‚æµè§ˆå™¨ç¯å¢ƒä¸‹è¾“å‡º 28ï¼ˆå› ä¸ºå…¨å±€çš„ageä¼šæŒ‚åœ¨ window ä¸Šï¼‰
info.call(null);
```

**4ã€**éšå¼ç»‘å®šï¼Œå‡½æ•°çš„è°ƒç”¨æ˜¯åœ¨æŸä¸ªå¯¹è±¡ä¸Šè§¦å‘çš„ï¼Œå³è°ƒç”¨ä½ç½®ä¸Šå­˜åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚å…¸å‹çš„éšå¼è°ƒç”¨ä¸º: `xxx.fn()`

```js
function info(){
    console.log(this.age);
}
var person = {
    age: 20,
    info
}
var age = 28;
person.info(); //20;æ‰§è¡Œçš„æ˜¯éšå¼ç»‘å®š
```

**5ã€** é»˜è®¤ç»‘å®šï¼Œåœ¨ä¸èƒ½åº”ç”¨å…¶å®ƒç»‘å®šè§„åˆ™æ—¶ä½¿ç”¨çš„é»˜è®¤è§„åˆ™ï¼Œé€šå¸¸æ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨ã€‚

éä¸¥æ ¼æ¨¡å¼ï¼š nodeç¯å¢ƒï¼Œæ‰§è¡Œå…¨å±€å¯¹è±¡ globalï¼Œæµè§ˆå™¨ç¯å¢ƒï¼Œæ‰§è¡Œå…¨å±€å¯¹è±¡ windowã€‚

ä¸¥æ ¼æ¨¡å¼ï¼šæ‰§è¡Œ undefined

```js
function info(){
    console.log(this.age);
}
var age = 28;
//ä¸¥æ ¼æ¨¡å¼ï¼›æŠ›é”™
//éä¸¥æ ¼æ¨¡å¼ï¼Œnodeä¸‹è¾“å‡º undefinedï¼ˆå› ä¸ºå…¨å±€çš„ageä¸ä¼šæŒ‚åœ¨ global ä¸Šï¼‰
//éä¸¥æ ¼æ¨¡å¼ã€‚æµè§ˆå™¨ç¯å¢ƒä¸‹è¾“å‡º 28ï¼ˆå› ä¸ºå…¨å±€çš„ageä¼šæŒ‚åœ¨ window ä¸Šï¼‰
//ä¸¥æ ¼æ¨¡å¼æŠ›å‡ºï¼Œå› ä¸º this æ­¤æ—¶æ˜¯ undefined
info(); 
```

**6ã€**  ç®­å¤´å‡½æ•°çš„æƒ…å†µï¼š

```js
let obj = {
    age: 20,
    info: function() {
        return () => {
            console.log(this.age); //thisç»§æ‰¿çš„æ˜¯å¤–å±‚ä¸Šä¸‹æ–‡ç»‘å®šçš„this
        }
    }
}

let person = {age: 28};
let info = obj.info();
info(); //20

let info2 = obj.info.call(person);
info2(); //28
```

[ç‚¹å‡»æŸ¥çœ‹æ›´å¤š](https://github.com/YvetteLau/Step-By-Step/issues/1)



### 2.JSä¸­åŸå§‹ç±»å‹æœ‰å“ªå‡ ç§ï¼Ÿnull æ˜¯å¯¹è±¡å—ï¼ŸåŸå§‹æ•°æ®ç±»å‹å’Œå¤æ‚æ•°æ®ç±»å‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ(2019-09-20)

**ç›®å‰ï¼ŒJSåŸå§‹ç±»å‹æœ‰å…­ç§ï¼Œåˆ†åˆ«ä¸º:**

- Boolean
- String
- Number
- Undefined
- Null
- Symbol(ES6æ–°å¢)

ES10æ–°å¢äº†ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼šBigInt

å¤æ‚æ•°æ®ç±»å‹åªæœ‰ä¸€ç§: Object

null ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°½ç®¡ `typeof null` è¾“å‡ºçš„æ˜¯ `object`ï¼Œè¿™æ˜¯ä¸€ä¸ªå†å²é—ç•™é—®é¢˜ï¼ŒJS çš„æœ€åˆç‰ˆæœ¬ä¸­ä½¿ç”¨çš„æ˜¯ 32 ä½ç³»ç»Ÿï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ä½¿ç”¨ä½ä½å­˜å‚¨å˜é‡çš„ç±»å‹ä¿¡æ¯ï¼Œ000 å¼€å¤´ä»£è¡¨æ˜¯å¯¹è±¡ï¼Œ`null` è¡¨ç¤ºä¸ºå…¨é›¶ï¼Œæ‰€ä»¥å°†å®ƒé”™è¯¯çš„åˆ¤æ–­ä¸º `object` ã€‚

**åŸºæœ¬æ•°æ®ç±»å‹å’Œå¤æ‚æ•°æ®ç±»å‹çš„åŒºåˆ«ä¸º:** 

1ã€å†…å­˜çš„åˆ†é…ä¸åŒ

- åŸºæœ¬æ•°æ®ç±»å‹å­˜å‚¨åœ¨æ ˆä¸­ã€‚
- å¤æ‚æ•°æ®ç±»å‹å­˜å‚¨åœ¨å †ä¸­ï¼Œæ ˆä¸­å­˜å‚¨çš„å˜é‡ï¼Œæ˜¯æŒ‡å‘å †ä¸­çš„å¼•ç”¨åœ°å€ã€‚

2ã€è®¿é—®æœºåˆ¶ä¸åŒ

- åŸºæœ¬æ•°æ®ç±»å‹æ˜¯æŒ‰å€¼è®¿é—®
- å¤æ‚æ•°æ®ç±»å‹æŒ‰å¼•ç”¨è®¿é—®ï¼ŒJSä¸å…è®¸ç›´æ¥è®¿é—®ä¿å­˜åœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œåœ¨è®¿é—®ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œé¦–å…ˆå¾—åˆ°çš„æ˜¯è¿™ä¸ªå¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„åœ°å€ï¼Œç„¶åå†æŒ‰ç…§è¿™ä¸ªåœ°å€å»è·å¾—è¿™ä¸ªå¯¹è±¡ä¸­çš„å€¼ã€‚

3ã€å¤åˆ¶å˜é‡æ—¶ä¸åŒ(a=b)

- åŸºæœ¬æ•°æ®ç±»å‹ï¼ša=b;æ˜¯å°†bä¸­ä¿å­˜çš„åŸå§‹å€¼çš„å‰¯æœ¬èµ‹å€¼ç»™æ–°å˜é‡aï¼Œaå’Œbå®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å½±å“
- å¤æ‚æ•°æ®ç±»å‹ï¼ša=b;å°†bä¿å­˜çš„å¯¹è±¡å†…å­˜çš„å¼•ç”¨åœ°å€èµ‹å€¼ç»™äº†æ–°å˜é‡a;aå’ŒbæŒ‡å‘äº†åŒä¸€ä¸ªå †å†…å­˜åœ°å€ï¼Œå…¶ä¸­ä¸€ä¸ªå€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œå¦ä¸€ä¸ªä¹Ÿä¼šæ”¹å˜ã€‚

4ã€å‚æ•°ä¼ é€’çš„ä¸åŒ(å®å‚/å½¢å‚)

å‡½æ•°ä¼ å‚éƒ½æ˜¯æŒ‰å€¼ä¼ é€’(æ ˆä¸­çš„å­˜å‚¨çš„å†…å®¹)ï¼šåŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ‹·è´çš„æ˜¯å€¼ï¼›å¤æ‚æ•°æ®ç±»å‹ï¼Œæ‹·è´çš„æ˜¯å¼•ç”¨åœ°å€

> [ç‚¹å‡»æŸ¥çœ‹æ›´å¤š](https://github.com/YvetteLau/Step-By-Step/issues/5) 



### 3.è¯´ä¸€è¯´ä½ å¯¹HTML5è¯­ä¹‰åŒ–çš„ç†è§£(2019-09-21)

è¯­ä¹‰åŒ–æ„å‘³ç€é¡¾åæ€ä¹‰ï¼ŒHTML5çš„è¯­ä¹‰åŒ–æŒ‡çš„æ˜¯åˆç†æ­£ç¡®çš„ä½¿ç”¨è¯­ä¹‰åŒ–çš„æ ‡ç­¾æ¥åˆ›å»ºé¡µé¢ç»“æ„ï¼Œå¦‚ header,footer,navï¼Œä»æ ‡ç­¾ä¸Šå³å¯ä»¥ç›´è§‚çš„çŸ¥é“è¿™ä¸ªæ ‡ç­¾çš„ä½œç”¨ï¼Œè€Œä¸æ˜¯æ»¥ç”¨divã€‚

**è¯­ä¹‰åŒ–çš„ä¼˜ç‚¹æœ‰:** 

- ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºé˜…è¯»ï¼Œåˆ©äºå¼€å‘å’Œç»´æŠ¤
- æ–¹ä¾¿å…¶ä»–è®¾å¤‡è§£æï¼ˆå¦‚å±å¹•é˜…è¯»å™¨ï¼‰æ ¹æ®è¯­ä¹‰æ¸²æŸ“ç½‘é¡µã€‚
- æœ‰åˆ©äºæœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰ï¼Œæœç´¢å¼•æ“çˆ¬è™«ä¼šæ ¹æ®ä¸åŒçš„æ ‡ç­¾æ¥èµ‹äºˆä¸åŒçš„æƒé‡
- 

### 4.å¦‚ä½•è®© (a == 1 && a == 2 && a == 3) çš„å€¼ä¸ºtrueï¼Ÿ(2019-09-22)

> [å¯å‚è€ƒ](https://github.com/YvetteLau/Blog/issues/31) 

**4.1 åˆ©ç”¨éšå¼è½¬æ¢è§„åˆ™** 

`==` æ“ä½œç¬¦åœ¨å·¦å³æ•°æ®ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œä¼šå…ˆè¿›è¡Œéšå¼è½¬æ¢ã€‚

`a == 1 && a == 2 && a == 3` çš„å€¼æ„å‘³ç€å…¶ä¸å¯èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€‚å› ä¸ºå¦‚æœ a æ˜¯ null æˆ–è€…æ˜¯ undefined boolç±»å‹ï¼Œéƒ½ä¸å¯èƒ½è¿”å›trueã€‚

å› æ­¤å¯ä»¥æ¨æµ‹ a æ˜¯å¤æ‚æ•°æ®ç±»å‹ï¼ŒJS ä¸­å¤æ‚æ•°æ®ç±»å‹åªæœ‰ `object`ï¼Œå›å¿†ä¸€ä¸‹ï¼ŒObject è½¬æ¢ä¸ºåŸå§‹ç±»å‹ä¼šè°ƒç”¨ä»€ä¹ˆæ–¹æ³•ï¼Ÿ

- å¦‚æœéƒ¨ç½²äº† `[Symbol.toPrimitive]` æ¥å£ï¼Œé‚£ä¹ˆè°ƒç”¨æ­¤æ¥å£ï¼Œè‹¥è¿”å›çš„ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒæŠ›å‡ºé”™è¯¯ã€‚
- å¦‚æœæ²¡æœ‰éƒ¨ç½² `[Symbol.toPrimitive]` æ¥å£ï¼Œé‚£ä¹ˆæ ¹æ®è¦è½¬æ¢çš„ç±»å‹ï¼Œå…ˆè°ƒç”¨ `valueOf` / `toString`
  1. éDateç±»å‹å¯¹è±¡ï¼Œ`hint` æ˜¯ `default` æ—¶ï¼Œè°ƒç”¨é¡ºåºä¸ºï¼š`valueOf` >>> `toString`ï¼Œå³`valueOf` è¿”å›çš„ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ‰ä¼šç»§ç»­è°ƒç”¨ `toString`ï¼Œå¦‚æœ`toString` è¿”å›çš„è¿˜ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆæŠ›å‡ºé”™è¯¯ã€‚
  2. å¦‚æœ `hint` æ˜¯ `string`(Dateå¯¹è±¡çš„hinté»˜è®¤æ˜¯string) ï¼Œè°ƒç”¨é¡ºåºä¸ºï¼š`toString` >>> `valueOf`ï¼Œå³`toString` è¿”å›çš„ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ‰ä¼šç»§ç»­è°ƒç”¨ `valueOf`ï¼Œå¦‚æœ`valueOf` è¿”å›çš„è¿˜ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆæŠ›å‡ºé”™è¯¯ã€‚
  3. å¦‚æœ `hint` æ˜¯ `number`ï¼Œè°ƒç”¨é¡ºåºä¸ºï¼š `valueOf` >>> `toString`

é‚£ä¹ˆå¯¹äºè¿™é“é¢˜ï¼Œåªè¦ `[Symbol.toPrimitive]` æ¥å£ï¼Œç¬¬ä¸€æ¬¡è¿”å›çš„å€¼æ˜¯ 1ï¼Œç„¶åé€’å¢ï¼Œå³æˆåŠŸæˆç«‹ã€‚

~~~js
let a = {
    [Symbol.toPrimitive]: (function(hint) {
            let i = 1;
            //é—­åŒ…çš„ç‰¹æ€§ä¹‹ä¸€ï¼ši ä¸ä¼šè¢«å›æ”¶
            return function() {
                return i++;
            }
    })()
}
console.log(a == 1 && a == 2 && a == 3); //true
~~~

è°ƒç”¨ `valueOf` æ¥å£çš„æƒ…å†µï¼š

~~~js
let a = {
    valueOf: (function() {
        let i = 1;
        //é—­åŒ…çš„ç‰¹æ€§ä¹‹ä¸€ï¼ši ä¸ä¼šè¢«å›æ”¶
        return function() {
            return i++;
        }
    })()
}
console.log(a == 1 && a == 2 && a == 3); //true
~~~

å¦å¤–ï¼Œé™¤äº†iè‡ªå¢çš„æ–¹æ³•å¤–ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ æ­£åˆ™ï¼Œå¦‚ä¸‹

~~~js
let a = {
    reg: /\d/g,
    valueOf () {
        return this.reg.exec(123)[0]
    }
}
console.log(a == 1 && a == 2 && a == 3); //true
~~~

**4.2 åˆ©ç”¨æ•°æ®åŠ«æŒ** 

ä½¿ç”¨ `Object.defineProperty` å®šä¹‰çš„å±æ€§ï¼Œåœ¨è·å–å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨ `get` æ–¹æ³•ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬åœ¨ `window` å¯¹è±¡ä¸Šå®šä¹‰ `a` å±æ€§ï¼Œå¦‚ä¸‹ï¼š

~~~js
let i = 1;
Object.defineProperty(window, 'a', {
    get: function() {
        return i++;
    }
});
console.log(a == 1 && a == 2 && a == 3); //true
~~~

ES6 æ–°å¢äº† `Proxy` ï¼Œæ­¤å¤„æˆ‘ä»¬åŒæ ·å¯ä»¥åˆ©ç”¨ `Proxy` å»å®ç°ï¼Œå¦‚ä¸‹ï¼š

~~~js
let a = new Proxy({}, {
    i: 1,
    get: function () {
        return () => this.i++;
    }
});
console.log(a == 1 && a == 2 && a == 3); // true
~~~

**4.3 æ•°ç»„çš„ `toString` æ¥å£é»˜è®¤è°ƒç”¨æ•°ç»„çš„ `join` æ–¹æ³•ï¼Œé‡å†™æ•°ç»„çš„ `join` æ–¹æ³•ã€‚**

~~~js
let a = [1, 2, 3];
a.join = a.shift;
console.log(a == 1 && a == 2 && a == 3); //true
~~~

**4.4 åˆ©ç”¨ `with` å…³é”®å­—** 

~~~js
let i = 0;

with ({
    get a() {
        return ++i;
    }
}) {
    console.log(a == 1 && a == 2 && a == 3); //true
}
~~~



### 5.é˜²æŠ–(debounce)å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Œè¯·å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°ã€‚(2019-09-23) 

> [å¯å‚è€ƒç¬¬ä¸‰é¢˜ ](http://zxinc520.com/lcj/%225d84756e662e3d49cc2c5b01%22) 

#### é˜²æŠ–å‡½æ•°çš„ä½œç”¨

é˜²æŠ–å‡½æ•°çš„ä½œç”¨å°±æ˜¯æ§åˆ¶å‡½æ•°åœ¨ä¸€å®šæ—¶é—´å†…çš„æ‰§è¡Œæ¬¡æ•°ã€‚é˜²æŠ–æ„å‘³ç€Nç§’å†…å‡½æ•°åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœNç§’å†…å†æ¬¡è¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡ç®—å»¶è¿Ÿæ—¶é—´ã€‚

ä¸¾ä¾‹è¯´æ˜ï¼šå°æ€æœ€è¿‘åœ¨å‡è‚¥ï¼Œä½†æ˜¯å¥¹éå¸¸è´ªåƒã€‚ä¸ºæ­¤ï¼Œä¸å…¶ç”·æœ‹å‹çº¦å®šå¥½ï¼Œå¦‚æœ10å¤©ä¸åƒé›¶é£Ÿï¼Œå°±å¯ä»¥è´­ä¹°ä¸€ä¸ªåŒ…(ä¸è¦é—®ä¸ºä»€ä¹ˆæ˜¯åŒ…ï¼Œå› ä¸ºåŒ…æ²»ç™¾ç—…)ã€‚ä½†æ˜¯å¦‚æœä¸­é—´åƒäº†ä¸€æ¬¡é›¶é£Ÿï¼Œé‚£ä¹ˆå°±è¦é‡æ–°è®¡ç®—æ—¶é—´ï¼Œç›´åˆ°å°æ€åšæŒ10å¤©æ²¡æœ‰åƒé›¶é£Ÿï¼Œæ‰èƒ½è´­ä¹°ä¸€ä¸ªåŒ…ã€‚æ‰€ä»¥ï¼Œç®¡ä¸ä½å˜´çš„å°æ€ï¼Œæ²¡æœ‰æœºä¼šä¹°åŒ…(æ‚²ä¼¤çš„æ•…äº‹)...è¿™å°±æ˜¯**é˜²æŠ–**ã€‚

ä¸ç®¡åƒæ²¡åƒé›¶é£Ÿï¼Œæ¯10å¤©ä¹°ä¸€ä¸ªåŒ…ï¼Œä¸­é—´æƒ³ä¹°åŒ…ï¼Œå¿ç€ï¼Œç­‰åˆ°ç¬¬åå¤©çš„æ—¶å€™å†ä¹°ï¼Œè¿™ç§æƒ…å†µæ˜¯**èŠ‚æµ**ã€‚å¦‚ä½•æ§åˆ¶å¥³æœ‹å‹çš„æ¶ˆè´¹ï¼Œå„ä½æ”»åŸç‹®ä»¬ï¼Œgetåˆ°äº†å—ï¼Ÿé˜²æŠ–å¯æ¯”èŠ‚æµæœ‰æ•ˆå¤šäº†ï¼

#### é˜²æŠ–åº”ç”¨åœºæ™¯

1. æœç´¢æ¡†è¾“å…¥æŸ¥è¯¢ï¼Œå¦‚æœç”¨æˆ·ä¸€ç›´åœ¨è¾“å…¥ä¸­ï¼Œæ²¡æœ‰å¿…è¦ä¸åœåœ°è°ƒç”¨å»è¯·æ±‚æœåŠ¡ç«¯æ¥å£ï¼Œç­‰ç”¨æˆ·åœæ­¢è¾“å…¥çš„æ—¶å€™ï¼Œå†è°ƒç”¨ï¼Œè®¾ç½®ä¸€ä¸ªåˆé€‚çš„æ—¶é—´é—´éš”ï¼Œæœ‰æ•ˆå‡è½»æœåŠ¡ç«¯å‹åŠ›ã€‚
2. è¡¨å•éªŒè¯
3. æŒ‰é’®æäº¤äº‹ä»¶ã€‚
4. æµè§ˆå™¨çª—å£ç¼©æ”¾ï¼Œresizeäº‹ä»¶ç­‰ã€‚



## ã€Step-By-Stepã€‘ä¸€å‘¨é¢è¯•é¢˜æ·±å…¥è§£æ / å‘¨åˆŠ 02

> æœ¬å‘¨é¢è¯•é¢˜ä¸€è§ˆ:

- èŠ‚æµ(throttle)å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Œè¯·å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°
- è¯´ä¸€è¯´ä½ å¯¹JSæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆå’Œä½œç”¨åŸŸé“¾çš„ç†è§£ï¼Ÿ
- ä»€ä¹ˆæ˜¯BFCï¼ŸBFCçš„å¸ƒå±€è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åˆ›å»ºBFCï¼Ÿ
- letã€constã€var çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ
- æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ



### 6. èŠ‚æµ(throttle)å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Œè¯·å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°ã€‚(2019-09-24)

> **è§£æ**ï¼š [å¯å‚è€ƒç¬¬ä¸‰é¢˜ ](http://zxinc520.com/lcj/%225d84756e662e3d49cc2c5b01%22) 

**èŠ‚æµå‡½æ•°çš„ä½œç”¨ï¼š**

èŠ‚æµå‡½æ•°çš„ä½œç”¨æ˜¯è§„å®šä¸€ä¸ªå•ä½æ—¶é—´ï¼Œåœ¨è¿™ä¸ªå•ä½æ—¶é—´å†…æœ€å¤šåªèƒ½è§¦å‘ä¸€æ¬¡å‡½æ•°æ‰§è¡Œï¼Œå¦‚æœè¿™ä¸ªå•ä½æ—¶é—´å†…å¤šæ¬¡è§¦å‘å‡½æ•°ï¼Œåªèƒ½æœ‰ä¸€æ¬¡ç”Ÿæ•ˆã€‚

ä¸¾ä¾‹è¯´æ˜ï¼šå°æ˜çš„å¦ˆå¦ˆå’Œå°æ˜çº¦å®šå¥½ï¼Œå¦‚æœå°æ˜åœ¨å‘¨è€ƒä¸­å–å¾—æ»¡åˆ†ï¼Œé‚£ä¹ˆå½“æœˆå¯ä»¥å¸¦ä»–å»æ¸¸ä¹åœºç©ï¼Œä½†æ˜¯ä¸€ä¸ªæœˆæœ€å¤šåªèƒ½å»ä¸€æ¬¡ã€‚

è¿™å…¶å®å°±æ˜¯ä¸€ä¸ªèŠ‚æµçš„ä¾‹å­ï¼Œåœ¨ä¸€ä¸ªæœˆçš„æ—¶é—´å†…ï¼Œå»æ¸¸ä¹åœºæœ€å¤šåªèƒ½è§¦å‘ä¸€æ¬¡ã€‚å³ä½¿è¿™ä¸ªæ—¶é—´å‘¨æœŸå†…ï¼Œå°æ˜å–å¾—å¤šæ¬¡æ»¡åˆ†ã€‚

**èŠ‚æµåº”ç”¨åœºæ™¯ï¼š** 

1.æŒ‰é’®ç‚¹å‡»äº‹ä»¶

2.æ‹–æ‹½äº‹ä»¶

3.onScoll

4.è®¡ç®—é¼ æ ‡ç§»åŠ¨çš„è·ç¦»(mousemove)

### 7. è¯´ä¸€è¯´ä½ å¯¹JSæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆå’Œä½œç”¨åŸŸé“¾çš„ç†è§£ï¼Ÿ(2019-09-24)

[JSæ‰§è¡Œä¸Šä¸‹æ–‡](https://tc39.github.io/ecma262/?nsukey=rQHqMrFpKq6JJN%2F%2FOeubPCslaSTSRyuc%2FXCznnIDze1SGzwva5SZtzixJ13p2gAlxua95Xa7fraZXwj5tyLRDK33%2BpNhyfKR%2FxyzhWNyB%2FqaIlsDGyQBckNoHQGPveOB24M%2BcK%2FgF8Tg1ehUGLWiCvumxdgcQwZOWj2BGfD3n%2FY%3D#sec-execution-contexts)

æ‰§è¡Œä¸Šä¸‹æ–‡å°±æ˜¯å½“å‰ JavaScript ä»£ç è¢«è§£æå’Œæ‰§è¡Œæ—¶æ‰€åœ¨ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µï¼Œ JavaScript ä¸­è¿è¡Œä»»ä½•çš„ä»£ç éƒ½æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚

> æ‰§è¡Œä¸Šä¸‹æ–‡ç±»å‹åˆ†ä¸ºï¼š

- å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡
- å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡
- evalå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡(ä¸è¢«æ¨è)

æ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åšä»¥ä¸‹å‡ ä»¶äº‹:

1. åˆ›å»ºå˜é‡å¯¹è±¡ï¼šé¦–å…ˆåˆå§‹åŒ–å‡½æ•°çš„å‚æ•°argumentsï¼Œæå‡å‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜ã€‚
2. åˆ›å»ºä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰ï¼šåœ¨æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡çš„åˆ›å»ºé˜¶æ®µï¼Œä½œç”¨åŸŸé“¾æ˜¯åœ¨å˜é‡å¯¹è±¡ä¹‹ååˆ›å»ºçš„ã€‚
3. ç¡®å®šthisçš„å€¼ï¼Œå³ ResolveThisBinding



**ä½œç”¨åŸŸ** 

**ä½œç”¨åŸŸ**è´Ÿè´£æ”¶é›†å’Œç»´æŠ¤ç”±æ‰€æœ‰å£°æ˜çš„æ ‡è¯†ç¬¦ï¼ˆå˜é‡ï¼‰ç»„æˆçš„ä¸€ç³»åˆ—æŸ¥è¯¢ï¼Œå¹¶å®æ–½ä¸€å¥—éå¸¸ä¸¥æ ¼çš„è§„åˆ™ï¼Œç¡®å®šå½“å‰æ‰§è¡Œçš„ä»£ç å¯¹è¿™äº›æ ‡è¯†ç¬¦çš„è®¿é—®æƒé™ã€‚â€”â€” æ‘˜å½•è‡ªã€Šä½ ä¸çŸ¥é“çš„JavaScriptã€‹(ä¸Šå·)

ä½œç”¨åŸŸæœ‰ä¸¤ç§å·¥ä½œæ¨¡å‹ï¼šè¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸï¼ŒJSé‡‡ç”¨çš„æ˜¯**è¯æ³•ä½œç”¨åŸŸ**å·¥ä½œæ¨¡å‹ï¼Œè¯æ³•ä½œç”¨åŸŸæ„å‘³ç€ä½œç”¨åŸŸæ˜¯ç”±ä¹¦å†™ä»£ç æ—¶å˜é‡å’Œå‡½æ•°å£°æ˜çš„ä½ç½®å†³å®šçš„ã€‚(`with` å’Œ `eval` èƒ½å¤Ÿä¿®æ”¹è¯æ³•ä½œç”¨åŸŸï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨ï¼Œå¯¹æ­¤ä¸åšç‰¹åˆ«è¯´æ˜)

> ä½œç”¨åŸŸåˆ†ä¸ºï¼š

- å…¨å±€ä½œç”¨åŸŸ
- å‡½æ•°ä½œç”¨åŸŸ
- å—çº§ä½œç”¨åŸŸ

**JSæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ(åé¢ç®€ç§°æ‰§è¡Œæ ˆ)** 

æ‰§è¡Œæ ˆï¼Œä¹Ÿå«åšè°ƒç”¨æ ˆï¼Œå…·æœ‰ **LIFO** (åè¿›å…ˆå‡º) ç»“æ„ï¼Œç”¨äºå­˜å‚¨åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚

> è§„åˆ™å¦‚ä¸‹ï¼š

- é¦–æ¬¡è¿è¡ŒJavaScriptä»£ç çš„æ—¶å€™,ä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œçš„ä¸Šä¸‹æ–‡å¹¶Pushåˆ°å½“å‰çš„æ‰§è¡Œæ ˆä¸­ï¼Œæ¯å½“å‘ç”Ÿå‡½æ•°è°ƒç”¨ï¼Œå¼•æ“éƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶Pushå½“å‰æ‰§è¡Œæ ˆçš„æ ˆé¡¶ã€‚
- å½“æ ˆé¡¶çš„å‡½æ•°è¿è¡Œå®Œæˆåï¼Œå…¶å¯¹åº”çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å°†ä¼šä»æ‰§è¡Œæ ˆä¸­Popå‡ºï¼Œä¸Šä¸‹æ–‡çš„æ§åˆ¶æƒå°†ç§»åŠ¨åˆ°å½“å‰æ‰§è¡Œæ ˆçš„ä¸‹ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚

ä»¥ä¸€æ®µä»£ç å…·ä½“è¯´æ˜ï¼š

~~~js
function fun3() {
    console.log('fun3')
}

function fun2() {
    fun3();
}

function fun1() {
    fun2();
}

fun1();
~~~

`Global Execution Context` (å³å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡)é¦–å…ˆå…¥æ ˆï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š

![mark](http://static.zxinc520.com/blog/20190925/KgyYmKIHz7fx.png?imageslim)



**ä½œç”¨åŸŸé“¾** 

ä½œç”¨åŸŸé“¾å°±æ˜¯ä»å½“å‰ä½œç”¨åŸŸå¼€å§‹ä¸€å±‚ä¸€å±‚å‘ä¸Šå¯»æ‰¾æŸä¸ªå˜é‡ï¼Œç›´åˆ°æ‰¾åˆ°å…¨å±€ä½œç”¨åŸŸè¿˜æ˜¯æ²¡æ‰¾åˆ°ï¼Œå°±å®£å¸ƒæ”¾å¼ƒã€‚è¿™ç§ä¸€å±‚ä¸€å±‚çš„å…³ç³»ï¼Œå°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚

### 8. ä»€ä¹ˆæ˜¯BFCï¼ŸBFCçš„å¸ƒå±€è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åˆ›å»ºBFCï¼Ÿ(2019-09-25)

> ä»€ä¹ˆæ˜¯BFC
>
> BFC æ˜¯ Block Formatting Context çš„ç¼©å†™ï¼Œå³å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹CSS2.1è§„èŒƒä¸­å¯¹ BFC çš„è¯´æ˜
>
> æµ®åŠ¨ã€ç»å¯¹å®šä½çš„å…ƒç´ ã€éå—çº§ç›’å­çš„å—å®¹å™¨ï¼ˆå¦‚inline-blocksã€table-cells å’Œ table-captionsï¼‰ï¼Œä»¥åŠ`overflow`çš„å€¼ä¸ä¸º`visible`ï¼ˆè¯¥å€¼å·²ä¼ æ’­åˆ°è§†åŒºæ—¶é™¤å¤–ï¼‰ä¸ºå…¶å†…å®¹å»ºç«‹æ–°çš„å—æ ¼å¼ä¸Šä¸‹æ–‡ã€‚

[BFCå¸ƒå±€è§„åˆ™](https://www.w3.org/TR/2011/REC-CSS2-20110607/visuren.html#block-formatting)

- BFCå†…ï¼Œç›’å­ä¾æ¬¡å‚ç›´æ’åˆ—ã€‚
- BFCå†…ï¼Œä¸¤ä¸ªç›’å­çš„å‚ç›´è·ç¦»ç”± `margin` å±æ€§å†³å®šã€‚å±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»Boxçš„marginä¼šå‘ç”Ÿé‡å ã€ç¬¦åˆåˆå¹¶åŸåˆ™çš„marginåˆå¹¶åæ˜¯ä½¿ç”¨å¤§çš„marginã€‘
- BFCå†…ï¼Œæ¯ä¸ªç›’å­çš„å·¦å¤–è¾¹ç¼˜æ¥è§¦å†…éƒ¨ç›’å­çš„å·¦è¾¹ç¼˜ï¼ˆå¯¹äºä»å³åˆ°å·¦çš„æ ¼å¼ï¼Œå³è¾¹ç¼˜æ¥è§¦ï¼‰ã€‚å³ä½¿åœ¨å­˜åœ¨æµ®åŠ¨çš„æƒ…å†µä¸‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚é™¤éåˆ›å»ºæ–°çš„BFCã€‚
- BFCçš„åŒºåŸŸä¸ä¼šä¸float boxé‡å ã€‚
- BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ã€‚åä¹‹ä¹Ÿå¦‚æ­¤ã€‚
- è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—ã€‚

**å¦‚ä½•åˆ›å»ºBFC** 

- æ ¹å…ƒç´ 
- æµ®åŠ¨å…ƒç´ ï¼ˆfloat å±æ€§ä¸ä¸º noneï¼‰
- position ä¸º absolute æˆ– relative
- overflow ä¸ä¸º visible çš„å—å…ƒç´ 
- display ä¸º inline-block, table-cell, table-caption

**BFCçš„åº”ç”¨** 

1. é˜²æ­¢ margin é‡å 

æ ¹æ®BFCè§„åˆ™ï¼ŒåŒä¸€ä¸ªBFCå†…çš„ä¸¤ä¸ªä¸¤ä¸ªç›¸é‚»Boxçš„ `margin` ä¼šå‘ç”Ÿé‡å ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨divå¤–é¢å†åµŒå¥—ä¸€å±‚å®¹å™¨ï¼Œå¹¶ä¸”è§¦å‘è¯¥å®¹å™¨ç”Ÿæˆä¸€ä¸ª BFCï¼Œè¿™æ · `<div class="a"></div>` å°±ä¼šå±äºä¸¤ä¸ª BFCï¼Œè‡ªç„¶ä¹Ÿå°±ä¸ä¼šå†å‘ç”Ÿ `margin` é‡å 

~~~HTML
<style>
    .a{
        height: 100px;
        width: 100px;
        margin: 50px;
        background: pink;
    }
    .container{
        overflow: auto; /*è§¦å‘ç”ŸæˆBFC*/
    }
</style>
<body>
    <div class="container">
        <div class="a"></div>
    </div>    
    <div class="a"></div>
</body>
~~~



2. æ¸…é™¤å†…éƒ¨æµ®åŠ¨

~~~HTML
<style>
    <style>
    .a{
        height: 100px;
        width: 100px;
        margin: 10px;
        background: pink;
        float: left;
    }
    .container{
        width: 120px;
        display: inline-block;/*è§¦å‘ç”ŸæˆBFC*/
        border: 2px solid black; 
    }
</style>
</style>
<body>
    <div class="container">
        <div class="a"></div>
    </div>
</body>
~~~

container çš„é«˜åº¦æ²¡æœ‰è¢«æ’‘å¼€ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ› container çš„é«˜åº¦èƒ½å¤ŸåŒ…å«æµ®åŠ¨å…ƒç´ ï¼Œé‚£ä¹ˆå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ BFCï¼Œå› ä¸ºæ ¹æ® BFC çš„è§„åˆ™ï¼Œè®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—ã€‚

3. è‡ªé€‚åº”å¤šæ å¸ƒå±€

~~~HTML
<style>
    body{
        width: 500px;
    }
    .a{
        height: 150px;
        width: 100px;
        background: pink;
        float: left;
    }
    .b{
        height: 200px;
        overflow: hidden; /*è§¦å‘ç”ŸæˆBFC*/
        background: blue;
    }
</style>
<body>
    <div class="a"></div>
    <div class="b"></div>
</body>   
~~~



![mark](http://static.zxinc520.com/blog/20190925/zIMIHi7uVOq6.png?imageslim)

> åŠ äº† `overflow: hidden;` è§¦å‘ç”Ÿæˆ BFC

![mark](http://static.zxinc520.com/blog/20190925/BFiWOckmwL9V.png?imageslim)





### 9. letã€constã€var çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ(2019-09-26)

![mark](http://static.zxinc520.com/blog/20190926/0imlOVJDQTTd.png?imageslim)



1. let/const å®šä¹‰çš„å˜é‡ä¸ä¼šå‡ºç°å˜é‡æå‡ï¼Œè€Œ var å®šä¹‰çš„å˜é‡ä¼šæå‡ã€‚
2. ç›¸åŒä½œç”¨åŸŸä¸­ï¼Œlet å’Œ const ä¸å…è®¸é‡å¤å£°æ˜ï¼Œvar å…è®¸é‡å¤å£°æ˜ã€‚
3. cosnt å£°æ˜å˜é‡æ—¶å¿…é¡»è®¾ç½®åˆå§‹å€¼
4. const å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ï¼Œè¿™ä¸ªå¸¸é‡ä¸å¯æ”¹å˜
5. let/const å£°æ˜çš„å˜é‡ä»…åœ¨å—çº§ä½œç”¨åŸŸä¸­æœ‰æ•ˆã€‚è€Œ var å£°æ˜çš„å˜é‡åœ¨å—çº§ä½œç”¨åŸŸå¤–ä»èƒ½è®¿é—®åˆ°ã€‚
6. é¡¶å±‚ä½œç”¨åŸŸä¸­ var å£°æ˜çš„å˜é‡æŒ‚åœ¨windowä¸Š(æµè§ˆå™¨ç¯å¢ƒ)
7. let/constæœ‰æš‚æ—¶æ€§æ­»åŒºçš„é—®é¢˜ï¼Œå³let/const å£°æ˜çš„å˜é‡ï¼Œåœ¨å®šä¹‰ä¹‹å‰éƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚å¦‚æœä½¿ç”¨ä¼šæŠ›å‡ºé”™è¯¯ã€‚



### 10. æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ(2019-09-27)

> æ·±æ‹·è´å’Œæµ…æ‹·è´æ˜¯é’ˆå¯¹å¤æ‚æ•°æ®ç±»å‹æ¥è¯´çš„ã€‚

**æ·±æ‹·è´**

> æ·±æ‹·è´å¤åˆ¶å˜é‡å€¼ï¼Œå¯¹äºéåŸºæœ¬ç±»å‹çš„å˜é‡ï¼Œåˆ™é€’å½’è‡³åŸºæœ¬ç±»å‹å˜é‡åï¼Œå†å¤åˆ¶ã€‚ æ·±æ‹·è´åçš„å¯¹è±¡ä¸åŸæ¥çš„å¯¹è±¡æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œäº’ä¸å½±å“ï¼Œå¯¹ä¸€ä¸ªå¯¹è±¡çš„ä¿®æ”¹å¹¶ä¸ä¼šå½±å“å¦ä¸€ä¸ªå¯¹è±¡ã€‚

**æµ…æ‹·è´**

> æµ…æ‹·è´æ˜¯ä¼šå°†å¯¹è±¡çš„æ¯ä¸ªå±æ€§è¿›è¡Œä¾æ¬¡å¤åˆ¶ï¼Œä½†æ˜¯å½“å¯¹è±¡çš„å±æ€§å€¼æ˜¯å¼•ç”¨ç±»å‹æ—¶ï¼Œå®è´¨å¤åˆ¶çš„æ˜¯å…¶å¼•ç”¨ï¼Œå½“å¼•ç”¨æŒ‡å‘çš„å€¼æ”¹å˜æ—¶ä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚

å¯ä»¥ä½¿ç”¨ `for in`ã€ `Object.assign`ã€ æ‰©å±•è¿ç®—ç¬¦ `...` ã€`Array.prototype.slice()`ã€`Array.prototype.concat()` ç­‰ï¼Œä¾‹å¦‚:

~~~js
let obj = {
    name: 'Yvette',
    age: 18,
    hobbies: ['reading', 'photography']
}
let obj2 = Object.assign({}, obj);
let obj3 = {...obj};

obj.name = 'Jack';
obj.hobbies.push('coding');
console.log(obj);//{ name: 'Jack', age: 18,hobbies: [ 'reading', 'photography', 'coding' ] }
console.log(obj2);//{ name: 'Yvette', age: 18,hobbies: [ 'reading', 'photography', 'coding' ] }
console.log(obj3);//{ name: 'Yvette', age: 18,hobbies: [ 'reading', 'photography', 'coding' ] }
~~~

å¯ä»¥çœ‹å‡ºæµ…æ‹·è´åªæœ€ç¬¬ä¸€å±‚å±æ€§è¿›è¡Œäº†æ‹·è´ï¼Œå½“ç¬¬ä¸€å±‚çš„å±æ€§å€¼æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œæ–°çš„å¯¹è±¡å’ŒåŸå¯¹è±¡äº’ä¸å½±å“ï¼Œä½†æ˜¯å¦‚æœç¬¬ä¸€å±‚çš„å±æ€§å€¼æ˜¯å¤æ‚æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆæ–°å¯¹è±¡å’ŒåŸå¯¹è±¡çš„å±æ€§å€¼å…¶æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜åœ°å€ã€‚æ¥çœ‹ä¸€ä¸‹ä½¿ç”¨ `for in` å®ç°æµ…æ‹·è´ã€‚

~~~js
let obj = {
    name: 'Yvette',
    age: 18,
    hobbies: ['reading', 'photography']
}
let newObj = {};
for(let key in obj){
    newObj[key] = obj[key]; 
    //è¿™ä¸€æ­¥ä¸éœ€è¦å¤šè¯´å§ï¼Œå¤æ‚æ•°æ®ç±»å‹æ ˆä¸­å­˜çš„æ˜¯å¯¹åº”çš„åœ°å€ï¼Œå› æ­¤èµ‹å€¼æ“ä½œï¼Œç›¸å½“äºä¸¤ä¸ªå±æ€§å€¼æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´
}
console.log(newObj);
//{ name: 'Yvette', age: 18, hobbies: [ 'reading', 'photography' ] }
obj.age = 20;
obj.hobbies.pop();
console.log(newObj);
//{ name: 'Yvette', age: 18, hobbies: [ 'reading' ] }
~~~



**æ·±æ‹·è´å®ç°**

> æ·±æ‹·è´æœ€ç®€å•çš„å®ç°æ˜¯: `JSON.parse(JSON.stringify(obj))`

~~~js
let obj = {
    name: 'Yvette',
    age: 18,
    hobbies: ['reading', 'photography']
}
let newObj = JSON.parse(JSON.stringify(obj));//newObjå’Œobjäº’ä¸å½±å“
obj.hobbies.push('coding');
console.log(newObj);//{ name: 'Yvette', age: 18, hobbies: [ 'reading', 'photography' ] }
~~~

`JSON.parse(JSON.stringify(obj))` æ˜¯æœ€ç®€å•çš„å®ç°æ–¹å¼ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ç¼ºé™·ï¼š

1. å¯¹è±¡çš„å±æ€§å€¼æ˜¯å‡½æ•°æ—¶ï¼Œæ— æ³•æ‹·è´ã€‚

~~~js
let obj = {
    name: 'Yvette',
    age: 18,
    hobbies: ['reading', 'photography'],
    sayHi: function() {
        console.log(sayHi);
    }
}
let newObj = JSON.parse(JSON.stringify(obj));
console.log(newObj);//{ name: 'Yvette', age: 18, hobbies: [ 'reading', 'photography' ] }
~~~

2. åŸå‹é“¾ä¸Šçš„å±æ€§æ— æ³•è·å–

~~~js
function Super() {

}
Super.prototype.location = 'NanJing';
function Child(name, age, hobbies) {
    this.name = name;
    this.age = age;
}
Child.prototype = new Super();

let obj = new Child('Yvette', 18);
console.log(obj.location); //NanJing
let newObj = JSON.parse(JSON.stringify(obj));
console.log(newObj);//{ name: 'Yvette', age: 18}
console.log(newObj.location);//undefined;åŸå‹é“¾ä¸Šçš„å±æ€§æ— æ³•è·å–
~~~

3.ä¸èƒ½æ­£ç¡®çš„å¤„ç† Date ç±»å‹çš„æ•°æ®

4.ä¸èƒ½å¤„ç† RegExp

5.ä¼šå¿½ç•¥ symbol

6.ä¼šå¿½ç•¥ undefined



> 2.å®ç°ä¸€ä¸ª deepClone å‡½æ•°

1. å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç›´æ¥è¿”å›
2. å¦‚æœæ˜¯ `RegExp` æˆ–è€… `Date` ç±»å‹ï¼Œè¿”å›å¯¹åº”ç±»å‹
3. å¦‚æœæ˜¯å¤æ‚æ•°æ®ç±»å‹ï¼Œé€’å½’ã€‚

~~~js
function deepClone(obj) { //é€’å½’æ‹·è´
    if(obj instanceof RegExp) return new RegExp(obj);
    if(obj instanceof Date) return new Date(obj);
    if(obj === null || typeof obj !== 'object') {
        //å¦‚æœä¸æ˜¯å¤æ‚æ•°æ®ç±»å‹ï¼Œç›´æ¥è¿”å›
        return obj;
    }
    /**
     * å¦‚æœobjæ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆ obj.constructor æ˜¯ [Function: Array]
     * å¦‚æœobjæ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆ obj.constructor æ˜¯ [Function: Object]
     */
    let t = new obj.constructor();
    for(let key in obj) {
        //å¦‚æœ obj[key] æ˜¯å¤æ‚æ•°æ®ç±»å‹ï¼Œé€’å½’
        if(obj.hasOwnProperty(key)){//æ˜¯å¦æ˜¯è‡ªèº«çš„å±æ€§
            t[key] = deepClone(obj[key]);
        }
    }
    return t;
}
~~~

æµ‹è¯•:

~~~js
function Super() {

}
Super.prototype.location = 'NanJing';
function Child(name, age, hobbies) {
    this.name = name;
    this.age = age;
    this.hobbies = hobbies;
}
Child.prototype = new Super();

let obj = new Child('Yvette', 18, ['reading', 'photography']);
obj.sayHi = function () {
    console.log('hi');
}
console.log(obj.location); //NanJing
let newObj = deepClone(obj);
console.log(newObj);//
console.log(newObj.location);//NanJing å¯ä»¥è·å–åˆ°åŸå‹é“¾ä¸Šçš„å±æ€§
newObj.sayHi();//hi å‡½æ•°å±æ€§æ‹·è´æ­£å¸¸
~~~

